<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>isolated/MonacoBlameGutterWrapper.js - SN Blame</title>
    
    <meta name="description" content="ServiceNow Browser Extensions utility tool" />
    
        <meta name="keywords" content="ServiceNow" />
        <meta name="keyword" content="ServiceNow" />
    
    
    
    <meta property="og:title" content="SN Blame"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    <meta property="og:site_name" content="SN Blame"/>
    <meta property="og:url" content=""/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/amagnin/SNBlameExtension" target="_blank" class="menu-item" id="repository" >Github repo</a></h2><h3>Classes</h3><ul><li><a href="MonacoBlameColorMap.html">MonacoBlameColorMap</a><ul class='methods'><li data-type='method'><a href="MonacoBlameColorMap.html#getColor">getColor</a></li></ul></li><li><a href="MonacoBlameGutter.html">MonacoBlameGutter</a><ul class='methods'><li data-type='method'><a href="MonacoBlameGutter.html#createGutter">createGutter</a></li><li data-type='method'><a href="MonacoBlameGutter.html#updateLines">updateLines</a></li><li data-type='method'><a href="MonacoBlameGutter.html#updateGutterSize">updateGutterSize</a></li><li data-type='method'><a href="MonacoBlameGutter.html#updateGutter">updateGutter</a></li><li data-type='method'><a href="MonacoBlameGutter.html#destroyGutter">destroyGutter</a></li></ul></li><li><a href="MonacoBlameGutterWrapper.html">MonacoBlameGutterWrapper</a><ul class='methods'><li data-type='method'><a href="MonacoBlameGutterWrapper.html#createGutter">createGutter</a></li><li data-type='method'><a href="MonacoBlameGutterWrapper.html#updateGutter">updateGutter</a></li><li data-type='method'><a href="MonacoBlameGutterWrapper.html#updateGutterLines">updateGutterLines</a></li><li data-type='method'><a href="MonacoBlameGutterWrapper.html#updateGutterSize">updateGutterSize</a></li><li data-type='method'><a href="MonacoBlameGutterWrapper.html#destroyGutter">destroyGutter</a></li><li data-type='method'><a href="MonacoBlameGutterWrapper.html#updateGutterOptions">updateGutterOptions</a></li><li data-type='method'><a href="MonacoBlameGutterWrapper.html#gutterExists">gutterExists</a></li></ul></li><li><a href="SNBlameOptions.html">SNBlameOptions</a><ul class='methods'><li data-type='method'><a href="SNBlameOptions.html#reloadOptions">reloadOptions</a></li><li data-type='method'><a href="SNBlameOptions.html#getOption">getOption</a></li><li data-type='method'><a href="SNBlameOptions.html#setOption">setOption</a></li><li data-type='method'><a href="SNBlameOptions.html#getAllOptions">getAllOptions</a></li></ul></li><li><a href="SNRESTFactory.html">SNRESTFactory</a><ul class='methods'><li data-type='method'><a href="SNRESTFactory.html#~getVersions">getVersions</a></li><li data-type='method'><a href="SNRESTFactory.html#~getScriptIncludes">getScriptIncludes</a></li><li data-type='method'><a href="SNRESTFactory.html#~getScope">getScope</a></li><li data-type='method'><a href="SNRESTFactory.html#~getProperties">getProperties</a></li><li data-type='method'><a href="SNRESTFactory.html#~getScriptIncludeCache">getScriptIncludeCache</a></li></ul></li><li><a href="SNBlameDateUtils.html">SNBlameDateUtils</a><ul class='methods'><li data-type='method'><a href="SNBlameDateUtils.html#.getFormattedDate">getFormattedDate</a></li><li data-type='method'><a href="SNBlameDateUtils.html#.timeAgo">timeAgo</a></li></ul></li><li><a href="SNBlamePlaceholderContentWidget.html">SNBlamePlaceholderContentWidget</a><ul class='methods'><li data-type='method'><a href="SNBlamePlaceholderContentWidget.html#updateDiff">updateDiff</a></li><li data-type='method'><a href="SNBlamePlaceholderContentWidget.html#onCursorChange">onCursorChange</a></li><li data-type='method'><a href="SNBlamePlaceholderContentWidget.html#getId">getId</a></li><li data-type='method'><a href="SNBlamePlaceholderContentWidget.html#getDomNode">getDomNode</a></li><li data-type='method'><a href="SNBlamePlaceholderContentWidget.html#getPosition">getPosition</a></li><li data-type='method'><a href="SNBlamePlaceholderContentWidget.html#dispose">dispose</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-scriptIncludesStaticCodeAnalysis.html">scriptIncludesStaticCodeAnalysis</a><ul class='methods'><li data-type='method'><a href="module-scriptIncludesStaticCodeAnalysis.html#~isGlideRecordNext">isGlideRecordNext</a></li><li data-type='method'><a href="module-scriptIncludesStaticCodeAnalysis.html#~ExpressionStatement">ExpressionStatement</a></li><li data-type='method'><a href="module-scriptIncludesStaticCodeAnalysis.html#~VariableDeclarator">VariableDeclarator</a></li><li data-type='method'><a href="module-scriptIncludesStaticCodeAnalysis.html#~AssignmentExpression">AssignmentExpression</a></li><li data-type='method'><a href="module-scriptIncludesStaticCodeAnalysis.html#~WhileStatement">WhileStatement</a></li><li data-type='method'><a href="module-scriptIncludesStaticCodeAnalysis.html#~getTableName">getTableName</a></li><li data-type='method'><a href="module-scriptIncludesStaticCodeAnalysis.html#~runScriptIncludesCodeAnalisis">runScriptIncludesCodeAnalisis</a></li></ul></li><li><a href="module-scriptIncludesToExtraLib.html">scriptIncludesToExtraLib</a><ul class='methods'><li data-type='method'><a href="module-scriptIncludesToExtraLib.html#~getScriptIncludeLib">getScriptIncludeLib</a></li></ul></li><li><a href="module-SNBlameMain.html">SNBlameMain</a><ul class='methods'><li data-type='method'><a href="module-SNBlameMain.html#~getVersions">getVersions</a></li><li data-type='method'><a href="module-SNBlameMain.html#~removeReverted">removeReverted</a></li><li data-type='method'><a href="module-SNBlameMain.html#~getBlame">getBlame</a></li><li data-type='method'><a href="module-SNBlameMain.html#~getDiffsWithCurrent">getDiffsWithCurrent</a></li><li data-type='method'><a href="module-SNBlameMain.html#~triggerScriptIncludeLib">triggerScriptIncludeLib</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#BlameLine">BlameLine</a></li><li><a href="global.html#BlameOptions">BlameOptions</a></li><li><a href="global.html#ServiceNowRESTFactory">ServiceNowRESTFactory</a></li><li><a href="global.html#MonacoEditor">MonacoEditor</a></li><li><a href="global.html#snBlamebootstrap">snBlamebootstrap</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">isolated/MonacoBlameGutterWrapper.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import MonacoBlameGutter from "./MonacoBlameGutter.js";
import SNBlameOptions from "./SNBlameOptions.js";

/**
 * @typedef {import('./SNBlameMain.js').BlameLine} BlameLine
 */

/**
 * Calass containing the gutter all the Blame gutters on the page.
 * @class
 */
class MonacoBlameGutterWrapper {
    /**@type {Object.&lt;MonacoBlameGutter>}*/
    #fields = {};

    /**@type {SNBlameOptions}*/
    #options;

    constructor() {
		if(typeof MonacoBlameGutterWrapper.instance === 'object' )
			return MonacoBlameGutterWrapper.instance;

		MonacoBlameGutterWrapper.instance = this;

        this.#options = new SNBlameOptions();

        window.addEventListener("sn-blame-scroll", event => {
            const { scroll, field } = event.detail;
            if (!this.#fields[field]) return;
          
            this.#fields[field].scroll(scroll);
            this.#fields[field].updateGutter();
        }, false);

        window.addEventListener("sn-blame-toggle-user-update-set", () => {
            this.#options.setOption("showUser", !this.#options.getOption("showUser"));
            this.updateGutterOptions();
        }, false);
        
        window.addEventListener("sn-blame-toggle-gutter-date", () => {
            this.#options.setOption("hideGutterDate", !this.#options.getOption("hideGutterDate"));
            this.updateGutterOptions();
        }, false);

        window.addEventListener("sn-blame-toggle-whitespace", () => {
            this.#options.setOption("ignoreWhiteSpace", !this.#options.getOption("ignoreWhiteSpace"));
            this.updateGutterOptions();
        }, false);
        
        window.addEventListener("sn-blame-toggle-line-numbers", () => {
            this.#options.setOption("debugLineNumbers", !this.#options.getOption("debugLineNumbers"));
            this.updateGutterOptions();
        }, false);

		return this;
    }

    /** 
     * creates a blame gutter for the given field/editor combo
     * @param {string} field fieldName for the monaco editor
     * @param {HTMLElement} editorElement html element containin the monaco editor
     * @param {Array&lt;BlameLine>} lines lines object for the field
     * @param {number} [lineHeight = 19] line height of the monaco editor
    */
    createGutter(field, editorElement, lines, lineHeight = 19){
        if(this.#fields[field]){
            this.updateGutterLines(field, lines);
            return;
        } 

        this.#fields[field] = new MonacoBlameGutter(editorElement, lines, lineHeight);
        this.updateGutter(field);
    }

    /** 
     * Updates the blamegutter for the given field
     * @param {string} field fieldName for the monaco editor gutter to update
    */
    updateGutter(field){
        if(!this.#fields[field]) return;
        this.#fields[field].updateGutter();
    }

    /** 
     * Updates the blamegutter for the given field to keep track current changes
     * @param {string} field fieldName for the monaco editor gutter to update
     * @param {Array&lt;BlameLine>} lines new lines to update the gutter with (lines contains the new blame to keep track of local changes)
    */
    updateGutterLines(field, lines){
        if(!this.#fields[field]) return;
        this.#fields[field].updateLines(lines);
    }

    /** 
     * Updates the blamegutter width for the given field
     * @param {string} field fieldName for the monaco editor gutter to update
    */
    updateGutterSize(field){
        if(!this.#fields[field]) return;
        this.#fields[field].updateGutterSize();
    }

    /** 
     * removes the blamegutter for the given field
     * @param {string} field fieldName for the monaco editor gutter to remove
    */
    destroyGutter(field){
        if(!this.#fields[field]) return;
        this.#fields[field].destroyGutter();
    }

    /** 
     * triggers an update on all the blame gutter for the gutter to update with the new options
     * 
    */
    updateGutterOptions(){
        Object.keys(this.#fields).forEach((field) => {
            this.#fields[field].updateGutter();
            this.#fields[field].updateGutterSize();
        });
    }

    /** 
     * returns true if the gutter for the given field exists
     * @param {string} field fieldName for the monaco editor gutter to remove
     * 
     * @return {boolean}
    */
    gutterExists(field){
        return !!this.#fields[field];
    }
    
}

export default MonacoBlameGutterWrapper;</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a> on Tue Jan 21 2025 00:05:30 GMT+0100 (hora est√°ndar de Europa central) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>



</body>
</html>
